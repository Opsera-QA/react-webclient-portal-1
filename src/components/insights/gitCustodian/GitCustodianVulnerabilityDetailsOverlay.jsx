import React, {useContext} from "react";
import PropTypes from "prop-types";
import {DialogToastContext} from "contexts/DialogToastContext";
import CenterOverlayContainer from "components/common/overlays/center/CenterOverlayContainer";
import StandaloneTextFieldBase from "components/common/fields/text/standalone/StandaloneTextFieldBase";
import { Row, Col } from "react-bootstrap";

const GitCustodianVulnerabilityDetailsOverlay = ({vulnerabilityData}) => {

  const toastContext = useContext(DialogToastContext);

  const closePanel = () => {
    toastContext.removeInlineMessage();
    toastContext.clearOverlayPanel();
  };

  return (
    <CenterOverlayContainer 
      closePanel={closePanel}
      showPanel={true}
      titleText={`Vulnerability Details`}
      showToasts={true}
      showCloseButton={false}      
    >
      <div className="scroll-y pt-3 px-3 hide-x-overflow">
        <div className="mb-3 flat-top-content-block p-3 detail-view-summary">
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Issue Id"} text={vulnerabilityData?.issueId} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Author"} text={vulnerabilityData?.author} />
            </Col>            
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Commit"} text={vulnerabilityData?.commit} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Commit Date"} text={vulnerabilityData?.commitDate} />
            </Col>            
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Commit Hash"} text={vulnerabilityData?.commitHash} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Exposed Hours"} text={vulnerabilityData?.exposedHours+" Hrs"} />
            </Col>            
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Issue Type"} text={vulnerabilityData?.type} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Status"} text={vulnerabilityData?.status} />
            </Col>
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Origin"} text={vulnerabilityData?.service} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Repository Id"} text={vulnerabilityData?.repoId} />
            </Col>
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Repository Name"} text={vulnerabilityData?.repository} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Path"} text={vulnerabilityData?.path} />
            </Col>
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Line Number"} text={vulnerabilityData?.lineNumber?.key} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Scanned Date"} text={vulnerabilityData?.lastScannedOn} />
            </Col>
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Task Id"} text={vulnerabilityData?.taskId} />
            </Col>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Run Count"} text={vulnerabilityData?.runCount} />
            </Col>
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Jira Ticket Id"} text={vulnerabilityData?.jiraTicket ? vulnerabilityData?.jiraTicket?.key : "NA"} />
            </Col>
            <Col lg={6}>
              {vulnerabilityData?.updatedBy && <StandaloneTextFieldBase label={"Updated By"} text={vulnerabilityData?.updatedBy} />}
            </Col>            
          </Row>
          <Row>
            <Col lg={6}>
              <StandaloneTextFieldBase label={"Severity"} text={vulnerabilityData?.severity ? vulnerabilityData?.severity : "NA"} />
            </Col>            
          </Row>
        </div>
      </div>
    </CenterOverlayContainer>    
  );
};

GitCustodianVulnerabilityDetailsOverlay.propTypes = {
  vulnerabilityData: PropTypes.object,  
};

export default GitCustodianVulnerabilityDetailsOverlay;
